<?php

/**
 * AllowedLoginsTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class AllowedLoginsTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object AllowedLoginsTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('AllowedLogins');
    }
    public static function deleteLogin($id) {
        try {
             $deletequery=  self::getInstance()
  ->createQuery()
  ->delete()
  ->where(" `id`=$id")
  ->execute();
            return true;
        } catch (Exception $e) {
            throw new DaoException($e->getMessage());
        }
    }
    
     public static function getAllowedLogin($ipaddress){
        OhrmLocationTable::getInstance();
        $q = Doctrine_Query::create()
                            ->from('AllowedLogins log')
                            
                            ->where('log.ip_address like ?',"%$ipaddress%");
       $location=$q->fetchArray();
      
       if(count($location)>0){
           return true;
       }
       else{
           return false;
       }
    }
}